import{useEffect as c,useState as a}from"./snowpack/pkg/haunted.js";import{getLocalAuth as r}from"./auth.js";function n(t){const o=new Set;return{getState:()=>t,setState:e=>{t=typeof e=="function"?e(t):e;for(const s of o)s(t)},subscribe:e=>(o.add(e),()=>{o.delete(e)})}}export function useStore(t){const[o,i]=a(t.getState);return c(()=>t.subscribe(i),[t]),[o,t.setState]}export const authStore=n(r()),hasUnreadNotificationsStore=n(!1),notificationsEnabledStore=n(u());function u(){return window.Notification&&Notification.permission==="granted"&&localStorage.getItem("notifications_enabled")==="true"}export function setLocalNotificationsEnabled(t){localStorage.setItem("notifications_enabled",String(t))}
