export function getLocalAuth(){const t=localStorage.getItem("auth");if(t===null)return null;let e;try{e=JSON.parse(t)}catch(n){return null}if(typeof e!="object"||e===null||typeof e.token!="string"||typeof e.expiresAt!="string"||typeof e.user!="object"||typeof e.user===null||typeof e.user.id!="string"||typeof e.user.username!="string"||!(typeof e.user.avatarURL=="string"||e.user.avatarURL===null))return null;let r;try{r=new Date(e.expiresAt)}catch(n){return null}return isNaN(r.valueOf())||r<new Date?null:{token:e.token,expiresAt:r,user:{id:e.user.id,username:e.user.username,avatarURL:e.user.avatarURL}}}export function setLocalAuth(t){if((typeof t=="function"?t(getLocalAuth()):t)===null){localStorage.removeItem("auth");return}try{localStorage.setItem("auth",JSON.stringify(t))}catch(r){}}
