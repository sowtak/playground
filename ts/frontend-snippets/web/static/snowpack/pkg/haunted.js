import{m as N,T as B,r as D,N as F}from"./common/lit-html-03eb0cde.js";export{h as html}from"./common/lit-html-03eb0cde.js";/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function W(e){let t=v.get(e.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},v.set(e.type,t));let s=t.stringsArray.get(e.strings);if(s!==void 0)return s;const n=e.strings.join(N);return s=t.keyString.get(n),s===void 0&&(s=new B(e,e.getTemplateElement()),t.keyString.set(n,s)),t.stringsArray.set(e.strings,s),s}const v=new Map;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const E=new WeakMap,k=(e,t,s)=>{let n=E.get(t);n===void 0&&(D(t,t.firstChild),E.set(t,n=new F(Object.assign({templateFactory:W},s))),n.appendInto(t)),n.setValue(e),n.commit()};let m,C=0;function S(e){m=e}function x(){m=null,C=0}function U(){return C++}const _=Symbol("haunted.phase"),g=Symbol("haunted.hook"),P=Symbol("haunted.update"),j=Symbol("haunted.commit"),l=Symbol("haunted.effects"),d=Symbol("haunted.layoutEffects"),y="haunted.context";class V{update;host;virtual;[g];[l];[d];constructor(t,s){this.update=t,this.host=s,this[g]=new Map,this[l]=[],this[d]=[]}run(t){S(this);let s=t();return x(),s}_runEffects(t){let s=this[t];S(this);for(let n of s)n.call(this);x()}runEffects(){this._runEffects(l)}runLayoutEffects(){this._runEffects(d)}teardown(){this[g].forEach(s=>{typeof s.teardown=="function"&&s.teardown()})}}const q=Promise.resolve().then.bind(Promise.resolve());function A(){let e=[],t;function s(){t=null;let n=e;e=[];for(var r=0,h=n.length;r<h;r++)n[r]()}return function(n){e.push(n),t==null&&(t=q(s))}}const G=A(),M=A();class J{renderer;host;state;[_];_updateQueued;constructor(t,s){this.renderer=t,this.host=s,this.state=new V(this.update.bind(this),s),this[_]=null,this._updateQueued=!1}update(){this._updateQueued||(G(()=>{let t=this.handlePhase(P);M(()=>{this.handlePhase(j,t),M(()=>{this.handlePhase(l)})}),this._updateQueued=!1}),this._updateQueued=!0)}handlePhase(t,s){switch(this[_]=t,t){case j:this.commit(s),this.runEffects(d);return;case P:return this.render();case l:return this.runEffects(l)}this[_]=null}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(t){this.state._runEffects(t)}teardown(){this.state.teardown()}}const K=(e="")=>e.replace(/-+([a-z])?/g,(t,s)=>s?s.toUpperCase():"");function X(e){class t extends J{frag;constructor(r,h,b){super(r,b||h);this.frag=h}commit(r){e(r,this.frag)}}function s(n,r,h){const b=(h||r||{}).baseElement||HTMLElement,{observedAttributes:T=[],useShadowDOM:Q=!0,shadowRootInit:z={}}=h||r||{};class w extends b{_scheduler;static get observedAttributes(){return n.observedAttributes||T||[]}constructor(){super();Q===!1?this._scheduler=new t(n,this):(this.attachShadow({mode:"open",...z}),this._scheduler=new t(n,this.shadowRoot,this))}connectedCallback(){this._scheduler.update()}disconnectedCallback(){this._scheduler.teardown()}attributeChangedCallback(u,o,i){if(o===i)return;let a=i===""?!0:i;Reflect.set(this,K(u),a)}}function H(c){let u=c,o=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return u},set(i){o&&u===i||(o=!0,u=i,this._scheduler&&this._scheduler.update())}})}const I=new Proxy(b.prototype,{getPrototypeOf(c){return c},set(c,u,o,i){let a;return u in c?(a=Object.getOwnPropertyDescriptor(c,u),a&&a.set?(a.set.call(i,o),!0):(Reflect.set(c,u,o,i),!0)):(typeof u=="symbol"||u[0]==="_"?a={enumerable:!0,configurable:!0,writable:!0,value:o}:a=H(o),Object.defineProperty(i,u,a),a.set&&a.set.call(i,o),!0)}});return Object.setPrototypeOf(w.prototype,I),w}return s}class f{id;state;constructor(t,s){this.id=t,this.state=s}}function Y(e,...t){let s=U(),n=m[g],r=n.get(s);return r||(r=new e(s,m,...t),n.set(s,r)),r.update(...t)}function p(e){return Y.bind(null,e)}function O(e){return p(class extends f{callback;lastValues;values;_teardown;constructor(t,s,n,r){super(t,s);e(s,this)}update(t,s){this.callback=t,this.values=s}call(){(!this.values||this.hasChanged())&&this.run(),this.lastValues=this.values}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(){typeof this._teardown=="function"&&this._teardown()}hasChanged(){return!this.lastValues||this.values.some((t,s)=>this.lastValues[s]!==t)}})}function L(e,t){e[l].push(t)}const Z=O(L),$=p(class extends f{Context;value;_ranEffect;_unsubscribe;constructor(e,t,s){super(e,t);this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,L(t,this)}update(e){if(this.state.virtual)throw new Error("can't be used with virtual components");return this.Context!==e&&(this._subscribe(e),this.Context=e),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(e){this.value=e,this.state.update()}_subscribe(e){const t={Context:e,callback:this._updater};this.state.host.dispatchEvent(new CustomEvent(y,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:s=null,value:n}=t;this.value=s?n:e.defaultValue,this._unsubscribe=s}teardown(){this._unsubscribe&&this._unsubscribe()}});function tt(e){return t=>{const s={Provider:class extends HTMLElement{listeners;_value;constructor(){super();this.listeners=new Set,this.addEventListener(y,this)}disconnectedCallback(){this.removeEventListener(y,this)}handleEvent(n){const{detail:r}=n;r.Context===s&&(r.value=this.value,r.unsubscribe=this.unsubscribe.bind(this,r.callback),this.listeners.add(r.callback),n.stopPropagation())}unsubscribe(n){this.listeners.delete(n)}set value(n){this._value=n;for(let r of this.listeners)r(n)}get value(){return this._value}},Consumer:e(function({render:n}){const r=$(s);return n(r)}),defaultValue:t};return s}}const R=p(class extends f{value;values;constructor(e,t,s,n){super(e,t);this.value=s(),this.values=n}update(e,t){return this.hasChanged(t)&&(this.values=t,this.value=e()),this.value}hasChanged(e=[]){return e.some((t,s)=>this.values[s]!==t)}}),et=(e,t)=>R(()=>e,t);function st(e,t){e[d].push(t)}const ht=O(st),nt=p(class extends f{args;constructor(e,t,s){super(e,t);this.updater=this.updater.bind(this),typeof s=="function"&&(s=s()),this.makeArgs(s)}update(){return this.args}updater(e){if(typeof e=="function"){const t=e,[s]=this.args;e=t(s)}this.makeArgs(e),this.state.update()}makeArgs(e){this.args=Object.freeze([e,this.updater])}}),lt=p(class extends f{reducer;currentState;constructor(e,t,s,n,r){super(e,t);this.dispatch=this.dispatch.bind(this),this.currentState=r!==void 0?r(n):n}update(e){return this.reducer=e,[this.currentState,this.dispatch]}dispatch(e){this.currentState=this.reducer(this.currentState,e),this.state.update()}}),rt=e=>R(()=>({current:e}),[]);function ut({render:e}){const t=X(e),s=tt(t);return{component:t,createContext:s}}const{component:it,createContext:dt}=ut({render:k});export{it as component,k as render,et as useCallback,Z as useEffect,rt as useRef,nt as useState};
